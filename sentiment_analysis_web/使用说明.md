# 使用说明

## 问题修复说明

### 1. 评论列表显示问题
**问题**：评论列表没有成功展示

**修复**：
- 添加了数据库存在性检查
- 添加了表存在性检查
- 添加了错误提示信息
- 如果数据库未初始化，会显示友好的提示信息

**解决方法**：
```bash
python init_db.py
```

### 2. 情感分布统计数据问题
**问题**：情感分布统计数据不对

**修复**：
- 修复了统计查询逻辑
- 添加了总数统计
- 添加了百分比显示
- 添加了错误处理

**验证方法**：
访问 http://localhost:5000/sentiment 查看统计结果

### 3. 词云分析电影相关问题
**问题**：词云分析还是电影相关

**修复**：
- 创建了 `generate_wordcloud.py` 脚本，专门生成电商评论的词云
- 更新了词云页面，显示电商评论相关的词云图片
- 添加了图片存在性检查

**解决方法**：
```bash
python generate_wordcloud.py
```

## 完整使用流程

1. **安装依赖**
   ```bash
   pip install -r requirements.txt
   ```

2. **复制数据文件**
   ```bash
   python copy_data.py
   ```

3. **初始化数据库**
   ```bash
   python init_db.py
   ```
   应该看到类似输出：
   ```
   正在从 data/reviews.csv 导入数据...
   成功导入 2000 条评论数据
   数据库初始化完成！
   ```

4. **生成词云图片**
   ```bash
   python generate_wordcloud.py
   ```
   应该看到类似输出：
   ```
   读取了 2000 条评论
   正面词云已保存到: static/assets/img/正面词云.png
   负面词云已保存到: static/assets/img/负面词云.png
   词云生成完成！
   ```

5. **启动应用**
   ```bash
   python app.py
   ```

6. **访问系统**
   - 首页: http://localhost:5000/
   - 评论列表: http://localhost:5000/reviews
   - 情感统计: http://localhost:5000/sentiment
   - 词云分析: http://localhost:5000/wordcloud
   - 关于页面: http://localhost:5000/about

## 常见问题

### Q: 评论列表显示"数据库文件不存在"
**A**: 运行 `python init_db.py` 初始化数据库

### Q: 情感统计显示为0
**A**: 确保数据库已初始化，并且数据已正确导入

### Q: 词云图片不显示
**A**: 运行 `python generate_wordcloud.py` 生成词云图片

### Q: 词云生成失败，提示字体不存在
**A**: 修改 `generate_wordcloud.py` 中的 `font_path` 变量，指向系统中存在的中文字体路径

## 注意事项

1. 确保 `data/reviews.csv` 文件存在且格式正确
2. 首次运行前必须执行 `init_db.py` 初始化数据库
3. 词云生成需要中文字体支持，Windows系统通常使用 `C:/Windows/Fonts/simsun.ttc`
4. 如果数据文件路径不同，需要修改相关脚本中的路径配置

